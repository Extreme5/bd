{% extends "base.html" %}
{% block content %}

<h1>Albums de la série "{{ serie }}"</h1>

{% if tomes %}
	<p>Nous possédons {{ tomes|length }} album(s) :</p>
    <div class="tomes-grid">
    {% for i in tomes_range %}
      <div class="tome {% if i in tomes %}active{% endif %}" data-num="{{ i }}" style="text-align:center">
        {{ i }}
      </div>
    {% endfor %}
  </div>

  <script>
    document.querySelectorAll('.tome').forEach(btn => {
      btn.addEventListener('click', async () => {
        const num = btn.dataset.num;
        btn.classList.toggle('active');
        await fetch(`/bdtheque/toggle_tome/{{ serie }}/${num}`, {
          method: 'POST',
          headers: { 'X-CSRFToken': '{{ csrf_token }}' }
        });
      });
    });
  </script>

{% else %}
	<p>Aucun album trouvé pour cette série.</p>
{% endif %}

{% endblock %}